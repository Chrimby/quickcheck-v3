<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2B Marketing Assessment - Das 4R-System | Brixon</title>
    <meta name="description" content="Finden Sie heraus, wo Ihr Marketing steht - ehrlich, ohne Schnickschnack. 8-12 Minuten für Ihre personalisierte Analyse.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Custom Properties */
        :root {
            --color-black: #0a0a0a;
            --color-white: #ffffff;
            --color-accent: #f7e74f;
            --color-gray-50: #fafafa;
            --color-gray-100: #f5f5f5;
            --color-gray-200: #e5e5e5;
            --color-gray-300: #d4d4d4;
            --color-gray-400: #a3a3a3;
            --color-gray-500: #737373;
            --color-gray-600: #525252;
            --color-gray-700: #404040;
            --color-gray-800: #262626;
            --color-gray-900: #171717;
            
            --font-base: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            
            --radius: 8px;
            --border: 1px solid var(--color-gray-200);
        }
        
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-base);
            background: var(--color-white);
            color: var(--color-black);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Typography */
        h1, h2, h3 {
            font-weight: 600;
            line-height: 1.2;
            letter-spacing: -0.025em;
        }
        
        h1 {
            font-size: clamp(2rem, 4vw, 2.5rem);
        }
        
        h2 {
            font-size: clamp(1.5rem, 3vw, 2rem);
        }
        
        h3 {
            font-size: clamp(1.125rem, 2vw, 1.5rem);
        }
        
        /* Container */
        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        
        .container-wide {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        
        /* Progress Bar */
        .progress-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--color-white);
            border-bottom: var(--border);
            z-index: 100;
            padding: 1rem 0;
        }
        
        .progress-container {
            max-width: 680px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .progress-bar {
            height: 2px;
            background: var(--color-gray-200);
            overflow: hidden;
            margin-bottom: 0.75rem;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--color-black);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8125rem;
            color: var(--color-gray-500);
        }
        
        .progress-label {
            font-weight: 500;
            color: var(--color-black);
        }
        
        /* Main Content */
        .main-content {
            margin-top: 100px;
            min-height: calc(100vh - 200px);
        }
        
        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 6rem 0 4rem;
        }
        
        .welcome-screen h1 {
            margin-bottom: 1rem;
        }
        
        .welcome-subtitle {
            font-size: 1rem;
            color: var(--color-gray-600);
            margin-bottom: 0.5rem;
            font-weight: 400;
        }
        
        .welcome-duration {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.875rem;
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: var(--radius);
            font-size: 0.8125rem;
            color: var(--color-gray-600);
            margin-bottom: 3rem;
        }
        
        /* Question Card */
        .question-card {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2.5rem 2rem;
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question-number {
            display: inline-block;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--color-gray-500);
            margin-bottom: 0.75rem;
        }
        
        .question-text {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            color: var(--color-black);
            line-height: 1.4;
        }
        
        .question-hint {
            font-size: 0.875rem;
            color: var(--color-gray-500);
            margin-top: -0.75rem;
            margin-bottom: 1.25rem;
        }
        
        /* Options */
        .options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .option {
            position: relative;
            display: flex;
            align-items: center;
            padding: 0.875rem 1rem;
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .option:hover {
            background: var(--color-gray-50);
            border-color: var(--color-gray-300);
        }
        
        .option.selected {
            background: var(--color-gray-50);
            border-color: var(--color-black);
        }
        
        .option input[type="radio"],
        .option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }
        
        .option-radio,
        .option-checkbox {
            width: 18px;
            height: 18px;
            border: var(--border);
            border-radius: 50%;
            margin-right: 0.75rem;
            flex-shrink: 0;
            transition: all 0.15s ease;
        }
        
        .option-checkbox {
            border-radius: 4px;
        }
        
        .option:hover .option-radio,
        .option:hover .option-checkbox {
            border-color: var(--color-gray-400);
        }
        
        .option.selected .option-radio,
        .option.selected .option-checkbox {
            border-color: var(--color-black);
            background: var(--color-black);
            position: relative;
        }
        
        .option.selected .option-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 6px;
            background: var(--color-white);
            border-radius: 50%;
        }
        
        .option.selected .option-checkbox::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--color-white);
            font-size: 12px;
            line-height: 1;
        }
        
        .option-label {
            font-size: 0.9375rem;
            color: var(--color-black);
            font-weight: 400;
        }
        
        .option.selected .option-label {
            font-weight: 500;
        }
        
        /* Text Input */
        .text-input-wrapper {
            margin-top: 0.5rem;
        }
        
        .text-input {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 0.9375rem;
            font-family: var(--font-base);
            border: var(--border);
            border-radius: var(--radius);
            outline: none;
            transition: border-color 0.15s ease;
        }
        
        .text-input:focus {
            border-color: var(--color-gray-400);
        }
        
        .text-input::placeholder {
            color: var(--color-gray-400);
        }
        
        .text-area {
            min-height: 100px;
            resize: vertical;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.9375rem;
            font-weight: 500;
            font-family: var(--font-base);
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.15s ease;
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--color-black);
            color: var(--color-white);
        }
        
        .btn-primary:hover:not(:disabled) {
            background: var(--color-gray-800);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: var(--color-white);
            color: var(--color-black);
            border: var(--border);
        }
        
        .btn-secondary:hover {
            background: var(--color-gray-50);
        }
        
        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        
        .arrow {
            font-size: 1rem;
            transition: transform 0.15s ease;
        }
        
        .btn:hover .arrow {
            transform: translateX(2px);
        }
        
        /* Results */
        .results-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .results-header h1 {
            margin-bottom: 0.5rem;
        }
        
        .results-subtitle {
            font-size: 1rem;
            color: var(--color-gray-600);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .score-card {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
        }
        
        .score-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }
        
        .score-card-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-gray-600);
        }
        
        .score-value {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--color-black);
        }
        
        .score-max {
            font-size: 1rem;
            color: var(--color-gray-400);
            font-weight: 400;
        }
        
        .score-bar {
            height: 4px;
            background: var(--color-gray-200);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .score-bar-fill {
            height: 100%;
            background: var(--color-black);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .score-percentage {
            font-size: 0.8125rem;
            color: var(--color-gray-500);
        }
        
        /* Chart */
        .chart-container {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #radarChart {
            max-width: 100%;
            height: auto;
        }
        
        /* Recommendations */
        .recommendations {
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .recommendations h3 {
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }
        
        .recommendation-item {
            padding: 1rem 0;
            border-bottom: var(--border);
        }
        
        .recommendation-item:last-child {
            border-bottom: none;
        }
        
        .recommendation-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
            color: var(--color-black);
        }
        
        .recommendation-text {
            font-size: 0.9375rem;
            color: var(--color-gray-600);
            line-height: 1.5;
        }
        
        /* Contact Form */
        .contact-form {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-black);
            margin-bottom: 0.5rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 0.9375rem;
            font-family: var(--font-base);
            border: var(--border);
            border-radius: var(--radius);
            outline: none;
            transition: border-color 0.15s ease;
        }
        
        .form-input:focus {
            border-color: var(--color-gray-400);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-wrapper {
            display: flex;
            align-items: start;
            gap: 0.75rem;
        }
        
        .checkbox-input {
            width: 18px;
            height: 18px;
            border: var(--border);
            border-radius: 4px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .checkbox-label {
            font-size: 0.875rem;
            color: var(--color-gray-600);
            line-height: 1.5;
        }
        
        /* Success Message */
        .success-container {
            text-align: center;
            padding: 6rem 0;
        }
        
        .success-icon {
            width: 64px;
            height: 64px;
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }
        
        .success-icon svg {
            width: 32px;
            height: 32px;
            stroke: var(--color-black);
        }
        
        .success-title {
            margin-bottom: 0.75rem;
        }
        
        .success-text {
            font-size: 1rem;
            color: var(--color-gray-600);
            margin-bottom: 2rem;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .container-wide {
                max-width: 100%;
                padding: 2rem 1.5rem;
            }
            
            .chart-container {
                padding: 1.5rem;
            }
            
            #radarChart {
                max-width: 400px;
            }
        }
        
        @media (max-width: 640px) {
            .container,
            .container-wide,
            .progress-container {
                padding: 0 1rem;
            }
            
            .question-card {
                padding: 1.5rem 1.25rem;
            }
            
            .question-text {
                font-size: 1.125rem;
            }
            
            .option {
                padding: 1rem 0.875rem;
                min-height: 52px;
            }
            
            .option-label {
                font-size: 1rem;
                line-height: 1.4;
            }
            
            .option-radio,
            .option-checkbox {
                width: 20px;
                height: 20px;
                margin-right: 0.875rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                padding: 0.875rem 1.5rem;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .score-card {
                padding: 1.25rem;
            }
            
            .overall-score {
                padding: 2rem 1.5rem;
            }
            
            .overall-score-value {
                font-size: 2.5rem;
            }
            
            .overall-score-max {
                font-size: 1rem;
            }
            
            .chart-container {
                padding: 1.5rem 1rem;
            }
            
            #radarChart {
                max-width: 100%;
                width: 100%;
                height: auto;
            }
            
            .recommendations {
                padding: 1.5rem;
            }
            
            .cta-section {
                padding: 2rem 1.5rem;
            }
            
            .cta-heading {
                font-size: 1.25rem;
            }
            
            .btn-cta {
                width: 100%;
                padding: 1rem 1.5rem;
                font-size: 0.9375rem;
            }
        }
        
        @media (max-width: 375px) {
            .welcome-screen {
                padding: 4rem 0 3rem;
            }
            
            .question-card {
                padding: 1.25rem 1rem;
            }
            
            .question-text {
                font-size: 1rem;
            }
            
            .option {
                padding: 0.875rem 0.75rem;
            }
            
            .overall-score-value {
                font-size: 2rem;
            }
        }
        
        /* Utilities */
        .hidden {
            display: none;
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fade-out {
            animation: fadeOut 0.3s ease forwards;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* CTA Section */
        .cta-section {
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: var(--radius);
            padding: 3rem 2rem;
            margin: 3rem 0 2rem;
            text-align: center;
        }
        
        .cta-heading {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--color-black);
        }
        
        .cta-text {
            font-size: 1rem;
            color: var(--color-gray-600);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }
        
        .btn-cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 500;
            font-family: var(--font-base);
            background: var(--color-black);
            color: var(--color-white);
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.15s ease;
            text-decoration: none;
        }
        
        .btn-cta:hover {
            background: var(--color-gray-800);
            transform: translateY(-1px);
        }
        
        /* Overall Score Display */
        .overall-score {
            text-align: center;
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2.5rem 2rem;
            margin-bottom: 2rem;
        }
        
        .overall-score-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
        }
        
        .overall-score-value {
            font-size: 3rem;
            font-weight: 600;
            color: var(--color-black);
            margin-bottom: 0.5rem;
        }
        
        .overall-score-max {
            font-size: 1.25rem;
            color: var(--color-gray-400);
        }
    </style>
    
    <script>
        const CONFIG = {
            webhookUrl: 'YOUR_WEBHOOK_URL_HERE',
            questions: [
                // CONTEXT SECTION
                {
                    id: 'q_001',
                    section: 'context',
                    sectionTitle: 'Wo stehen Sie?',
                    text: 'Wie viele Mitarbeiter hat Ihr Unternehmen?',
                    type: 'single',
                    options: [
                        { value: '1-10', label: '1-10 Mitarbeiter' },
                        { value: '11-25', label: '11-25 Mitarbeiter' },
                        { value: '26-50', label: '26-50 Mitarbeiter' },
                        { value: '51-100', label: '51-100 Mitarbeiter' },
                        { value: '101-250', label: '101-250 Mitarbeiter' },
                        { value: '250+', label: 'Über 250 Mitarbeiter' }
                    ]
                },
                {
                    id: 'q_002',
                    section: 'context',
                    text: 'Wie viele qualifizierte Leads generieren Sie aktuell pro Monat?',
                    hint: 'Mit "qualifiziert" meinen wir: Menschen, die ernsthaft an Ihrer Lösung interessiert sind und potenziell kaufen könnten.',
                    type: 'single',
                    options: [
                        { value: '0-5', label: '0-5 Leads' },
                        { value: '6-15', label: '6-15 Leads' },
                        { value: '16-30', label: '16-30 Leads' },
                        { value: '31-50', label: '31-50 Leads' },
                        { value: '51-100', label: '51-100 Leads' },
                        { value: '100+', label: 'Über 100 Leads' },
                        { value: 'unknown', label: 'Ehrlich gesagt: Keine Ahnung' }
                    ]
                },
                {
                    id: 'q_003',
                    section: 'context',
                    text: 'Wer ist hauptsächlich für Marketing verantwortlich?',
                    type: 'single',
                    options: [
                        { value: 'founder', label: 'Geschäftsführung macht es nebenbei' },
                        { value: 'employee_parttime', label: 'Ein Mitarbeiter, der es neben anderen Aufgaben macht' },
                        { value: 'employee_fulltime', label: 'Eine dedizierte Marketing-Person' },
                        { value: 'team', label: 'Ein kleines Marketing-Team' },
                        { value: 'agency', label: 'Hauptsächlich eine externe Agentur' },
                        { value: 'nobody', label: 'Ehrlich? Niemand so richtig' }
                    ]
                },
                
                // REACH SECTION
                {
                    id: 'q_101',
                    section: 'reach',
                    sectionTitle: 'Phase 1: Reach - Werden Sie überhaupt gefunden?',
                    text: 'Wie aktiv sind Sie oder Ihre Führungskräfte persönlich auf LinkedIn?',
                    hint: 'Wichtig: Wir meinen persönliche Profile, nicht die Unternehmensseite. Menschen folgen Menschen, nicht Unternehmen.',
                    type: 'single',
                    options: [
                        { value: '0', label: 'LinkedIn? Haben wir nicht oder nutzen wir nicht', score: 0 },
                        { value: '1', label: 'Profil existiert, aber wir posten nie', score: 1 },
                        { value: '2', label: 'Ab und zu posten wir was (1-2x im Monat)', score: 2 },
                        { value: '3', label: 'Regelmäßig aktiv (mehrmals pro Woche)', score: 3 },
                        { value: '4', label: 'Sehr aktiv mit strategischem Content', score: 4 },
                        { value: '5', label: 'Täglich präsent, Engagement messbar steigend', score: 5 }
                    ]
                },
                {
                    id: 'q_102',
                    section: 'reach',
                    text: 'Worüber schreiben Sie hauptsächlich, wenn Sie Content erstellen?',
                    type: 'single',
                    options: [
                        { value: 'products', label: 'Über unsere Produkte und Leistungen', score: 1 },
                        { value: 'company', label: 'Über unser Unternehmen und Erfolge', score: 1 },
                        { value: 'industry', label: 'Über allgemeine Branchen-News', score: 2 },
                        { value: 'problems', label: 'Über konkrete Probleme unserer Zielgruppe', score: 5 },
                        { value: 'experience', label: 'Über unsere praktischen Erfahrungen aus echten Projekten', score: 5 },
                        { value: 'none', label: 'Wir erstellen aktuell keinen Content', score: 0 }
                    ]
                },
                {
                    id: 'q_103',
                    section: 'reach',
                    text: 'Haben Sie Lead-Magneten, für die Menschen Ihnen ihre E-Mail-Adresse geben?',
                    hint: 'Gemeint sind Dinge wie: E-Books, Checklisten, Kalkulatoren, Templates - nicht "Kostenloses Beratungsgespräch".',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein, haben wir nicht', score: 0 },
                        { value: '1', label: 'Ja, aber die werden kaum heruntergeladen', score: 1 },
                        { value: '3', label: 'Ja, wir haben 1-2 die ganz gut funktionieren', score: 3 },
                        { value: '5', label: 'Ja, mehrere die regelmäßig Leads bringen', score: 5 }
                    ]
                },
                {
                    id: 'q_104',
                    section: 'reach',
                    text: 'Wenn jemand auf Ihre Website kommt: Was passiert dann?',
                    type: 'single',
                    options: [
                        { value: '1', label: 'Er liest ein bisschen und verschwindet wieder', score: 1 },
                        { value: '2', label: 'Es gibt ein Kontaktformular, mehr nicht', score: 2 },
                        { value: '3', label: 'Es gibt mehrere Möglichkeiten, uns zu erreichen', score: 3 },
                        { value: '4', label: 'Es gibt konkrete Angebote zum Download', score: 4 },
                        { value: '5', label: 'Die Website ist systematisch darauf ausgelegt, Leads zu generieren', score: 5 }
                    ]
                },
                {
                    id: 'q_105',
                    section: 'reach',
                    text: 'Investieren Sie Geld in bezahlte Werbung (LinkedIn Ads, Google Ads, etc.)?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein, aktuell nicht', score: 0 },
                        { value: '1', label: 'Haben wir mal probiert, hat nicht funktioniert', score: 1 },
                        { value: '2', label: 'Ja, aber ohne wirkliche Strategie', score: 2 },
                        { value: '4', label: 'Ja, gezielt und mit messbarem Ergebnis', score: 4 },
                        { value: '5', label: 'Ja, systematisch - verstärkt unser organisches Marketing', score: 5 }
                    ]
                },
                {
                    id: 'q_106',
                    section: 'reach',
                    text: 'Wie viele Menschen besuchen Ihre Website durchschnittlich pro Monat?',
                    type: 'single',
                    options: [
                        { value: '0-500', label: 'Unter 500 Besucher' },
                        { value: '501-1000', label: '500-1.000 Besucher' },
                        { value: '1001-2500', label: '1.000-2.500 Besucher' },
                        { value: '2501-5000', label: '2.500-5.000 Besucher' },
                        { value: '5001-10000', label: '5.000-10.000 Besucher' },
                        { value: '10000+', label: 'Über 10.000 Besucher' },
                        { value: 'unknown', label: 'Keine Ahnung ehrlich gesagt' }
                    ]
                },
                {
                    id: 'q_107',
                    section: 'reach',
                    text: 'Wissen Sie, woher Ihre Website-Besucher kommen?',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein, tracken wir nicht', score: 0 },
                        { value: 'basic', label: 'Grob, aber nicht systematisch', score: 2 },
                        { value: 'advanced', label: 'Ja, detailliert mit durchgängigem Tracking', score: 5 }
                    ]
                },
                {
                    id: 'q_108',
                    section: 'reach',
                    text: 'Wie viel Prozent Ihrer Website-Besucher werden zu Leads?',
                    hint: 'Also: wie viele hinterlassen eine E-Mail-Adresse oder nehmen Kontakt auf?',
                    type: 'single',
                    options: [
                        { value: 'unknown', label: 'Weiß ich nicht' },
                        { value: '0-1', label: 'Unter 1%' },
                        { value: '1-2', label: '1-2%' },
                        { value: '2-4', label: '2-4%' },
                        { value: '4-6', label: '4-6%' },
                        { value: '6+', label: 'Über 6%' }
                    ]
                },
                
                // RELATE SECTION
                {
                    id: 'q_201',
                    section: 'relate',
                    sectionTitle: 'Phase 2: Relate - Bleiben Sie im Gedächtnis?',
                    text: 'Haben Sie einen E-Mail-Newsletter?',
                    hint: 'Newsletter erleben ein Revival - sie geben Ihnen einen direkten Draht zu Interessenten, ohne Algorithmen dazwischen.',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein', score: 0 },
                        { value: '2', label: 'Ja, aber sehr unregelmäßig', score: 2 },
                        { value: '4', label: 'Ja, regelmäßig (mindestens monatlich)', score: 4 },
                        { value: '5', label: 'Ja, systematisch mit klarer Strategie', score: 5 }
                    ]
                },
                {
                    id: 'q_202',
                    section: 'relate',
                    text: 'Wie viele Menschen haben Ihren Newsletter abonniert?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Haben keinen Newsletter' },
                        { value: '0-100', label: '0-100 Kontakte' },
                        { value: '101-500', label: '101-500 Kontakte' },
                        { value: '501-1000', label: '501-1.000 Kontakte' },
                        { value: '1001-2500', label: '1.001-2.500 Kontakte' },
                        { value: '2501-5000', label: '2.501-5.000 Kontakte' },
                        { value: '5000+', label: 'Über 5.000 Kontakte' }
                    ]
                },
                {
                    id: 'q_203',
                    section: 'relate',
                    text: 'Was passiert, wenn jemand Ihren Lead-Magneten herunterlädt?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nichts oder nur sehr verzögert', score: 0 },
                        { value: '2', label: 'Eine automatische Danke-E-Mail', score: 2 },
                        { value: '4', label: 'Eine Serie von Follow-up-E-Mails über mehrere Wochen', score: 4 },
                        { value: '5', label: 'Systematisches Nurturing, abgestimmt auf den heruntergeladenen Content', score: 5 },
                        { value: 'na', label: 'Haben keine Lead-Magneten', score: 0 }
                    ]
                },
                {
                    id: 'q_204',
                    section: 'relate',
                    text: 'Nutzen Sie ein CRM-System für Ihre Kontakte?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein - Excel oder gar nichts', score: 0 },
                        { value: '2', label: 'Ja, aber nutzen es kaum', score: 2 },
                        { value: '4', label: 'Ja, ist unser zentrales Tool', score: 4 },
                        { value: '5', label: 'Ja, voll integriert mit E-Mail-Marketing', score: 5 }
                    ]
                },
                {
                    id: 'q_205',
                    section: 'relate',
                    text: 'Erstellen Sie aus einem Content-Stück mehrere Formate?',
                    hint: 'Beispiel: Aus einem Webinar entstehen LinkedIn-Posts, ein Blog-Artikel, Video-Clips, E-Mail-Content...',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein, jeder Content wird einmal verwendet', score: 0 },
                        { value: '3', label: 'Manchmal, wenn wir dran denken', score: 3 },
                        { value: '5', label: 'Ja, systematisch - "Create once, distribute forever"', score: 5 },
                        { value: 'na', label: 'Erstellen aktuell kaum Content', score: 0 }
                    ]
                },
                {
                    id: 'q_206',
                    section: 'relate',
                    text: 'Haben Sie verschiedene E-Mail-Listen für verschiedene Interessen?',
                    hint: 'Also: Segmentierung nach Themen, heruntergeladenen Inhalten oder Verhalten?',
                    type: 'yes_no',
                    options: [
                        { value: 'yes', label: 'Ja' },
                        { value: 'no', label: 'Nein' }
                    ]
                },
                {
                    id: 'q_207',
                    section: 'relate',
                    text: 'Wie oft denken Sie: "Wir müssten mal wieder was posten/schreiben"?',
                    type: 'single',
                    options: [
                        { value: 'always', label: 'Ständig - Marketing passiert nur wenn Zeit ist', score: 0 },
                        { value: 'sometimes', label: 'Manchmal - wir sind nicht konsequent genug', score: 2 },
                        { value: 'rarely', label: 'Selten - wir haben einen Rhythmus etabliert', score: 4 },
                        { value: 'never', label: 'Nie - läuft systematisch ohne dass wir dran denken müssen', score: 5 }
                    ]
                },
                
                // RESPOND SECTION
                {
                    id: 'q_301',
                    section: 'respond',
                    sectionTitle: 'Phase 3: Respond - Werden Leads zu Kunden?',
                    text: 'Wann ist ein Lead für Sie "qualifiziert"?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Haben wir nicht definiert', score: 0 },
                        { value: '2', label: 'Ungefähr definiert, aber nicht klar', score: 2 },
                        { value: '5', label: 'Klar definiert (Budget, Autorität, Bedarf, Timing)', score: 5 }
                    ]
                },
                {
                    id: 'q_302',
                    section: 'respond',
                    text: 'Wenn Ihr Vertrieb einen Lead kontaktiert: Weiß er, was dieser Lead vorher gemacht hat?',
                    hint: 'Also: Welchen Content hat er konsumiert? Welche Seiten besucht? Was heruntergeladen?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein, keine Infos verfügbar', score: 0 },
                        { value: '2', label: 'Manchmal, wenn wir dran denken nachzuschauen', score: 2 },
                        { value: '5', label: 'Ja, systematisch dokumentiert und sichtbar', score: 5 },
                        { value: 'na', label: 'Haben keinen dedizierten Vertrieb' }
                    ]
                },
                {
                    id: 'q_303',
                    section: 'respond',
                    text: 'Wie schnell reagieren Sie, wenn ein Lead bei Ihnen anfragt?',
                    type: 'single',
                    options: [
                        { value: '1', label: 'Mehrere Tage', score: 1 },
                        { value: '2', label: '24-48 Stunden', score: 2 },
                        { value: '4', label: 'Innerhalb weniger Stunden', score: 4 },
                        { value: '5', label: 'Sofort oder innerhalb von 1 Stunde', score: 5 }
                    ]
                },
                {
                    id: 'q_304',
                    section: 'respond',
                    text: 'Wie arbeiten Marketing und Vertrieb bei Ihnen zusammen?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Arbeiten komplett getrennt', score: 0 },
                        { value: '2', label: 'Reden gelegentlich miteinander', score: 2 },
                        { value: '4', label: 'Regelmäßiger Austausch', score: 4 },
                        { value: '5', label: 'Hand in Hand mit gemeinsamen Zielen', score: 5 },
                        { value: 'na', label: 'Haben diese Trennung nicht - ist dieselbe Person' }
                    ]
                },
                {
                    id: 'q_305',
                    section: 'respond',
                    text: 'Können Sie nachvollziehen, welche Marketing-Aktivität zu einem Abschluss geführt hat?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein, wissen wir nicht', score: 0 },
                        { value: '2', label: 'Grob - wir fragen manchmal nach', score: 2 },
                        { value: '5', label: 'Ja, systematisch dokumentiert', score: 5 }
                    ]
                },
                {
                    id: 'q_306',
                    section: 'respond',
                    text: 'Von 100 Leads, die bei Ihnen ankommen: Wie viele werden zu zahlenden Kunden?',
                    type: 'single',
                    options: [
                        { value: 'unknown', label: 'Keine Ahnung' },
                        { value: '0-5', label: 'Unter 5' },
                        { value: '5-10', label: '5-10' },
                        { value: '10-20', label: '10-20' },
                        { value: '20-30', label: '20-30' },
                        { value: '30+', label: 'Über 30' }
                    ]
                },
                {
                    id: 'q_307',
                    section: 'respond',
                    text: 'Wie lange dauert es durchschnittlich vom ersten Kontakt bis zum Abschluss?',
                    type: 'single',
                    options: [
                        { value: '0-4', label: 'Unter 4 Wochen' },
                        { value: '4-8', label: '1-2 Monate' },
                        { value: '8-12', label: '2-3 Monate' },
                        { value: '12-24', label: '3-6 Monate' },
                        { value: '24+', label: 'Über 6 Monate' },
                        { value: 'unknown', label: 'Weiß ich nicht genau' }
                    ]
                },
                {
                    id: 'q_308',
                    section: 'respond',
                    text: 'Was ist Ihr größtes Problem bei der Umwandlung von Leads zu Kunden?',
                    type: 'single',
                    options: [
                        { value: 'quality', label: 'Die Lead-Qualität stimmt nicht' },
                        { value: 'timing', label: 'Falsches Timing - noch nicht kaufbereit' },
                        { value: 'followup', label: 'Wir verlieren den Kontakt im Follow-up' },
                        { value: 'competition', label: 'Verlieren gegen Konkurrenz' },
                        { value: 'price', label: 'Preis ist oft ein Thema' },
                        { value: 'trust', label: 'Vertrauen wird nicht aufgebaut' },
                        { value: 'none', label: 'Haben damit aktuell kein großes Problem' }
                    ]
                },
                
                // RETAIN SECTION
                {
                    id: 'q_401',
                    section: 'retain',
                    sectionTitle: 'Phase 4: Retain - Nutzen Sie Ihre Bestandskunden?',
                    text: 'Behandeln Sie alle Bestandskunden gleich?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Ja, alle gleich', score: 0 },
                        { value: '2', label: 'Grobe Unterscheidung nach Umsatz', score: 2 },
                        { value: '5', label: 'Klare Segmentierung nach Wert und Potenzial', score: 5 }
                    ]
                },
                {
                    id: 'q_402',
                    section: 'retain',
                    text: 'Wie aktiv verkaufen Sie zusätzliche Services an Bestandskunden?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Gar nicht', score: 0 },
                        { value: '2', label: 'Wenn es sich ergibt', score: 2 },
                        { value: '4', label: 'Regelmäßige Gespräche über weitere Möglichkeiten', score: 4 },
                        { value: '5', label: 'Systematischer Prozess mit klaren Triggern', score: 5 }
                    ]
                },
                {
                    id: 'q_403',
                    section: 'retain',
                    text: 'Haben Sie ein System, damit Bestandskunden Sie weiterempfehlen?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein', score: 0 },
                        { value: '2', label: 'Wir fragen manchmal nach Empfehlungen', score: 2 },
                        { value: '5', label: 'Ja, systematisches Programm mit Incentives', score: 5 }
                    ]
                },
                {
                    id: 'q_404',
                    section: 'retain',
                    text: 'Wie viele Ihrer Neukunden kommen durch Empfehlungen von Bestandskunden?',
                    type: 'single',
                    options: [
                        { value: '0-10', label: 'Fast keine (0-10%)' },
                        { value: '11-25', label: 'Einige (11-25%)' },
                        { value: '26-50', label: 'Etwa die Hälfte (26-50%)' },
                        { value: '51-75', label: 'Die meisten (51-75%)' },
                        { value: '75+', label: 'Fast alle (über 75%)' },
                        { value: 'unknown', label: 'Weiß ich nicht' }
                    ]
                },
                {
                    id: 'q_405',
                    section: 'retain',
                    text: 'Messen Sie, wie zufrieden Ihre Bestandskunden sind?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein', score: 0 },
                        { value: '2', label: 'Informell - wir fragen mal nach', score: 2 },
                        { value: '4', label: 'Ja, regelmäßige Umfragen', score: 4 },
                        { value: '5', label: 'Systematisch (z.B. NPS) mit Follow-up bei Problemen', score: 5 }
                    ]
                },
                {
                    id: 'q_406',
                    section: 'retain',
                    text: 'Nutzen Sie Ihre zufriedenen Kunden für Marketing?',
                    hint: 'Gemeint sind: Case Studies, Testimonials, Referenzen, gemeinsame Webinare...',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein, machen wir nicht', score: 0 },
                        { value: 'rarely', label: 'Selten, wenn es sich ergibt', score: 3 },
                        { value: 'yes', label: 'Ja, aktiv und systematisch', score: 5 }
                    ]
                },
                {
                    id: 'q_407',
                    section: 'retain',
                    text: 'Ist Bestandskunden-Marketing ein fester Teil Ihrer Marketing-Strategie?',
                    type: 'single',
                    options: [
                        { value: '0', label: 'Nein, Fokus liegt auf Neukunden', score: 0 },
                        { value: '3', label: 'Teilweise, aber nicht systematisch', score: 3 },
                        { value: '5', label: 'Ja, gleichwertig zu Neukundengewinnung', score: 5 }
                    ]
                },
                
                // FINAL SECTION
                {
                    id: 'q_501',
                    section: 'final',
                    sectionTitle: 'Zusammenfassung',
                    text: 'Was nervt Sie am meisten an Ihrem aktuellen Marketing?',
                    type: 'single',
                    options: [
                        { value: 'visibility', label: 'Niemand kennt uns / wir sind unsichtbar' },
                        { value: 'quantity', label: 'Zu wenige Leads' },
                        { value: 'quality', label: 'Falsche Leads - passen nicht zu uns' },
                        { value: 'conversion', label: 'Leads kaufen nicht' },
                        { value: 'time', label: 'Keine Zeit dafür' },
                        { value: 'knowhow', label: 'Wissen nicht, was wir tun sollen' },
                        { value: 'chaos', label: 'Alles ist unsystematisch und chaotisch' },
                        { value: 'measurement', label: 'Können nicht messen, was funktioniert' }
                    ]
                },
                {
                    id: 'q_502',
                    section: 'final',
                    text: 'Was investieren Sie aktuell monatlich in Marketing (Zeit UND Geld)?',
                    hint: 'Gemeint ist: Budget für Tools, Ads, externe Hilfe PLUS der Gegenwert der Zeit, die Sie investieren.',
                    type: 'single',
                    options: [
                        { value: '0-1000', label: 'Unter 1.000€' },
                        { value: '1000-3000', label: '1.000-3.000€' },
                        { value: '3000-5000', label: '3.000-5.000€' },
                        { value: '5000-10000', label: '5.000-10.000€' },
                        { value: '10000-20000', label: '10.000-20.000€' },
                        { value: '20000+', label: 'Über 20.000€' }
                    ]
                },
                {
                    id: 'q_503',
                    section: 'final',
                    text: 'Was ist Ihr realistisches Ziel für die nächsten 6 Monate?',
                    type: 'single',
                    options: [
                        { value: 'double', label: 'Lead-Anzahl verdoppeln' },
                        { value: 'quality', label: 'Lead-Qualität massiv verbessern' },
                        { value: 'system', label: 'Endlich ein System aufbauen, das läuft' },
                        { value: 'efficiency', label: 'Weniger Zeit reinstecken müssen' },
                        { value: 'predictable', label: 'Planbare, wiederkehrende Leads haben' },
                        { value: 'scale', label: 'Von 10 auf 100+ Leads skalieren' }
                    ]
                },
                {
                    id: 'q_504',
                    section: 'final',
                    text: 'Hand aufs Herz: Wie konsequent setzen Sie Marketing um?',
                    type: 'single',
                    options: [
                        { value: 'reactive', label: 'Nur wenn wir zu wenig Aufträge haben' },
                        { value: 'inconsistent', label: 'Phasenweise, nicht kontinuierlich' },
                        { value: 'trying', label: 'Versuchen es, aber nicht konsequent genug' },
                        { value: 'consistent', label: 'Ziemlich konsequent am Ball' },
                        { value: 'systematic', label: 'Systematisch - läuft wie ein Uhrwerk' }
                    ]
                }
            ]
        };
        
        // State Management
        window.state = {
            currentQuestionIndex: 0,
            answers: {},
            scores: {
                reach: 0,
                relate: 0,
                respond: 0,
                retain: 0,
                total: 0
            },
            showWelcome: true,
            showResults: false
        };
        
        // Utility Functions
        function getVisibleQuestions() {
            return CONFIG.questions;
        }
        
        function getCurrentQuestion() {
            return getVisibleQuestions()[state.currentQuestionIndex];
        }
        
        function getSectionLabel(section) {
            const labels = {
                context: 'Kontext',
                reach: 'Phase 1: Reach',
                relate: 'Phase 2: Relate',
                respond: 'Phase 3: Respond',
                retain: 'Phase 4: Retain',
                final: 'Abschluss'
            };
            return labels[section] || section;
        }
        
        function calculateProgress() {
            const total = getVisibleQuestions().length;
            const current = state.currentQuestionIndex + 1;
            return Math.round((current / total) * 100);
        }
        
        function calculateScores() {
            const scores = {
                reach: 0,
                relate: 0,
                respond: 0,
                retain: 0,
                total: 0
            };
            
            const scoredSections = ['reach', 'relate', 'respond', 'retain'];
            
            Object.keys(state.answers).forEach(questionId => {
                const question = CONFIG.questions.find(q => q.id === questionId);
                if (!question || !scoredSections.includes(question.section)) return;
                
                const answer = state.answers[questionId];
                const option = question.options?.find(o => o.value === answer);
                
                if (option && option.score !== undefined) {
                    scores[question.section] += option.score;
                }
            });
            
            scores.total = scores.reach + scores.relate + scores.respond + scores.retain;
            state.scores = scores;
            
            // Save to localStorage
            localStorage.setItem('assessment_scores', JSON.stringify(scores));
            localStorage.setItem('assessment_answers', JSON.stringify(state.answers));
            
            return scores;
        }
        
        // Rendering Functions
        function renderProgress() {
            const progress = calculateProgress();
            const current = state.currentQuestionIndex + 1;
            const total = getVisibleQuestions().length;
            const currentQuestion = getCurrentQuestion();
            
            return `
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">
                        <span class="progress-label">${getSectionLabel(currentQuestion.section)}</span>
                        <span>Frage ${current} von ${total}</span>
                    </div>
                </div>
            `;
        }
        
        function renderWelcome() {
            return `
                <div class="welcome-screen fade-in">
                    <h1>B2B Marketing Assessment</h1>
                    <p class="welcome-subtitle">Finden Sie heraus, wo Ihr Marketing steht - ehrlich, ohne Schnickschnack</p>
                    <div class="welcome-duration">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        8-12 Minuten
                    </div>
                    <button class="btn btn-primary" onclick="startAssessment()" data-testid="button-start-assessment">
                        Assessment starten
                        <span class="arrow">→</span>
                    </button>
                </div>
            `;
        }
        
        function renderQuestion(question) {
            const isAnswered = state.answers[question.id] !== undefined && state.answers[question.id] !== '';
            const questionIndex = getVisibleQuestions().findIndex(q => q.id === question.id);
            
            let optionsHtml = '';
            
            if (question.type === 'single' || question.type === 'yes_no') {
                optionsHtml = question.options.map(option => {
                    const isSelected = state.answers[question.id] === option.value;
                    return `
                        <label class="option ${isSelected ? 'selected' : ''}" data-testid="option-${option.value}">
                            <input 
                                type="radio" 
                                name="${question.id}" 
                                value="${option.value}"
                                ${isSelected ? 'checked' : ''}
                                onchange="handleAnswer('${question.id}', '${option.value}')"
                            >
                            <div class="option-radio"></div>
                            <span class="option-label">${option.label}</span>
                        </label>
                    `;
                }).join('');
            } else if (question.type === 'checkbox') {
                optionsHtml = question.options.map(option => {
                    const isSelected = state.answers[question.id] === option.value;
                    return `
                        <label class="option ${isSelected ? 'selected' : ''}" data-testid="option-${option.value}">
                            <input 
                                type="checkbox" 
                                name="${question.id}" 
                                value="${option.value}"
                                ${isSelected ? 'checked' : ''}
                                onchange="handleAnswer('${question.id}', this.checked ? '${option.value}' : '')"
                            >
                            <div class="option-checkbox"></div>
                            <span class="option-label">${option.label}</span>
                        </label>
                    `;
                }).join('');
            } else if (question.type === 'text' || question.type === 'email') {
                const value = state.answers[question.id] || '';
                optionsHtml = `
                    <div class="text-input-wrapper">
                        <input 
                            type="${question.type === 'email' ? 'email' : 'text'}" 
                            class="text-input" 
                            value="${value}"
                            placeholder="Ihre Antwort..."
                            oninput="handleAnswer('${question.id}', this.value)"
                            ${question.required ? 'required' : ''}
                            data-testid="input-${question.id}"
                        >
                    </div>
                `;
            } else if (question.type === 'textarea') {
                const value = state.answers[question.id] || '';
                const placeholder = question.placeholder || 'Ihre Antwort...';
                optionsHtml = `
                    <div class="text-input-wrapper">
                        <textarea 
                            class="text-input text-area" 
                            placeholder="${placeholder}"
                            oninput="handleAnswer('${question.id}', this.value)"
                            data-testid="input-${question.id}"
                        >${value}</textarea>
                    </div>
                `;
            }
            
            return `
                <div class="question-card">
                    <div class="question-number">Frage ${questionIndex + 1} von ${getVisibleQuestions().length}</div>
                    <h2 class="question-text">${question.text}</h2>
                    ${question.hint ? `<p class="question-hint">${question.hint}</p>` : ''}
                    <div class="options">
                        ${optionsHtml}
                    </div>
                    ${questionIndex > 0 ? `
                        <div class="btn-group">
                            <button class="btn btn-secondary" onclick="previousQuestion()" data-testid="button-previous">
                                ← Zurück
                            </button>
                        </div>
                    ` : ''}
                </div>
            `;
        }
        
        function renderResults() {
            const scores = calculateScores();
            const maxScores = { 
                reach: 40, 
                relate: 32, 
                respond: 32, 
                retain: 27, 
                total: 131 
            };
            
            const getInterpretation = (score, max, phase) => {
                const percentage = (score / max) * 100;
                
                if (phase === 'reach') {
                    if (score >= 36) return 'Vorbildlich sichtbar';
                    if (score >= 25) return 'Auf dem richtigen Weg';
                    if (score >= 13) return 'Erste Ansätze da';
                    return 'Praktisch unsichtbar';
                } else if (phase === 'relate') {
                    if (score >= 29) return 'Best Practice';
                    if (score >= 21) return 'Systematisches Nurturing';
                    if (score >= 11) return 'Basis vorhanden';
                    return 'Leads verschwinden ins Nichts';
                } else if (phase === 'respond') {
                    if (score >= 29) return 'Perfektes Alignment';
                    if (score >= 21) return 'Gutes Zusammenspiel';
                    if (score >= 11) return 'Es läuft, aber holprig';
                    return 'Marketing und Sales getrennt';
                } else if (phase === 'retain') {
                    if (score >= 25) return 'Vorbildlich';
                    if (score >= 18) return 'Systematische Pflege';
                    if (score >= 9) return 'Erste Ansätze';
                    return 'Verschenktes Potenzial';
                }
                
                return Math.round(percentage) + '%';
            };
            
            return `
                <div class="results-header fade-in">
                    <h1>Ihre Ergebnisse</h1>
                    <p class="results-subtitle">Basierend auf Ihren Angaben</p>
                </div>
                
                <div class="overall-score fade-in">
                    <div class="overall-score-label">Gesamtscore</div>
                    <div class="overall-score-value">${scores.total} <span class="overall-score-max">von ${maxScores.total} Punkten</span></div>
                    <div class="score-bar" style="max-width: 400px; margin: 1.5rem auto 0;">
                        <div class="score-bar-fill" style="width: ${(scores.total/maxScores.total)*100}%"></div>
                    </div>
                </div>
                
                <div class="results-grid fade-in">
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Phase 1: Reach</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.reach}</span>
                            <span class="score-max">/ ${maxScores.reach}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.reach/maxScores.reach)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.reach, maxScores.reach, 'reach')}</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Phase 2: Relate</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.relate}</span>
                            <span class="score-max">/ ${maxScores.relate}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.relate/maxScores.relate)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.relate, maxScores.relate, 'relate')}</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Phase 3: Respond</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.respond}</span>
                            <span class="score-max">/ ${maxScores.respond}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.respond/maxScores.respond)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.respond, maxScores.respond, 'respond')}</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Phase 4: Retain</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.retain}</span>
                            <span class="score-max">/ ${maxScores.retain}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.retain/maxScores.retain)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.retain, maxScores.retain, 'retain')}</div>
                    </div>
                </div>
                
                <div class="chart-container fade-in">
                    <canvas id="radarChart"></canvas>
                </div>
                
                <div class="recommendations fade-in">
                    <h3>Ihre wichtigsten Handlungsempfehlungen</h3>
                    ${getRecommendations(scores, maxScores)}
                </div>
                
                <div class="cta-section fade-in">
                    <h2 class="cta-heading">Möchten Sie Ihre Ergebnisse mit einem Experten besprechen?</h2>
                    <p class="cta-text">Buchen Sie ein kostenloses 30-minütiges Strategiegespräch. Wir analysieren Ihre Ergebnisse im Detail und zeigen Ihnen konkrete nächste Schritte – ohne Verkaufsdruck, versprochen.</p>
                    <a href="YOUR_CALENDLY_URL_HERE" target="_blank" class="btn-cta" data-testid="button-calendly-cta">
                        Jetzt Assessment vom Experten kostenlos analysieren lassen und Fragen stellen
                        <span class="arrow">→</span>
                    </a>
                </div>
            `;
        }
        
        function getRecommendations(scores, maxScores) {
            const recommendations = [];
            
            if (scores.reach < 25) {
                recommendations.push({
                    title: 'Reach optimieren',
                    text: 'Ihre Sichtbarkeit ist die größte Baustelle. Starten Sie mit regelmäßigem LinkedIn-Content und Lead-Magneten.'
                });
            }
            
            if (scores.relate < 21) {
                recommendations.push({
                    title: 'Systematisches Nurturing aufbauen',
                    text: 'Sie verlieren Leads, weil Sie nicht am Ball bleiben. Newsletter und automatisierte Follow-ups sind der nächste Schritt.'
                });
            }
            
            if (scores.respond < 21) {
                recommendations.push({
                    title: 'Marketing und Sales verzahnen',
                    text: 'Ihre Leads versanden im Verkaufsprozess. Marketing und Sales müssen als ein System arbeiten.'
                });
            }
            
            if (scores.retain < 18) {
                recommendations.push({
                    title: 'Bestandskunden systematisch nutzen',
                    text: 'Sie lassen massiv Potenzial liegen. Upselling und Empfehlungen von zufriedenen Kunden sind Ihr schnellster Hebel.'
                });
            }
            
            if (recommendations.length === 0) {
                recommendations.push({
                    title: 'Starke Basis - jetzt konsequent bleiben',
                    text: 'Sie gehören zu den wenigen, die Marketing systematisch angehen. Bleiben Sie am Ball und optimieren Sie kontinuierlich.'
                });
            }
            
            return recommendations.map(rec => `
                <div class="recommendation-item">
                    <div class="recommendation-title">${rec.title}</div>
                    <div class="recommendation-text">${rec.text}</div>
                </div>
            `).join('');
        }
        
        function drawRadarChart() {
            const canvas = document.getElementById('radarChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Make canvas responsive
            const container = canvas.parentElement;
            const size = Math.min(container.clientWidth - 40, 500);
            canvas.width = size;
            canvas.height = size;
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 60;
            
            const scores = state.scores;
            const maxScores = { reach: 40, relate: 32, respond: 32, retain: 27 };
            const labels = ['Reach', 'Relate', 'Respond', 'Retain'];
            const values = [
                scores.reach / maxScores.reach,
                scores.relate / maxScores.relate,
                scores.respond / maxScores.respond,
                scores.retain / maxScores.retain
            ];
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            ctx.strokeStyle = '#e5e5e5';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 5; i++) {
                const r = (radius / 5) * i;
                ctx.beginPath();
                for (let j = 0; j < 4; j++) {
                    const angle = (Math.PI * 2 * j) / 4 - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * r;
                    const y = centerY + Math.sin(angle) * r;
                    if (j === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#d4d4d4';
            ctx.lineWidth = 1;
            for (let i = 0; i < 4; i++) {
                const angle = (Math.PI * 2 * i) / 4 - Math.PI / 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            // Draw data
            ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
            ctx.strokeStyle = '#0a0a0a';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < values.length; i++) {
                const angle = (Math.PI * 2 * i) / values.length - Math.PI / 2;
                const r = radius * values[i];
                const x = centerX + Math.cos(angle) * r;
                const y = centerY + Math.sin(angle) * r;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw labels
            ctx.fillStyle = '#404040';
            ctx.font = '500 14px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            for (let i = 0; i < labels.length; i++) {
                const angle = (Math.PI * 2 * i) / labels.length - Math.PI / 2;
                const x = centerX + Math.cos(angle) * (radius + 35);
                const y = centerY + Math.sin(angle) * (radius + 35);
                ctx.fillText(labels[i], x, y);
            }
        }
        
        function renderSuccess() {
            return `
                <div class="success-container fade-in">
                    <div class="success-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    </div>
                    <h2 class="success-title">Vielen Dank!</h2>
                    <p class="success-text">Ihre Ergebnisse wurden gespeichert.</p>
                    <button class="btn btn-primary" onclick="location.reload()" data-testid="button-new-assessment">
                        Neues Assessment
                    </button>
                </div>
            `;
        }
        
        // Event Handlers
        function handleAnswer(questionId, value) {
            state.answers[questionId] = value;
            
            // Get the current question type to determine if we should auto-advance
            const currentQuestion = getCurrentQuestion();
            const shouldAutoAdvance = currentQuestion.type === 'single' || currentQuestion.type === 'yes_no';
            
            // Update visual state immediately
            render();
            
            // Auto-advance for single-choice questions
            if (shouldAutoAdvance) {
                const questionCard = document.querySelector('.question-card');
                if (questionCard) {
                    questionCard.classList.add('fade-out');
                }
                
                setTimeout(() => {
                    if (state.currentQuestionIndex < getVisibleQuestions().length - 1) {
                        state.currentQuestionIndex++;
                        render();
                        window.scrollTo(0, 0);
                    } else {
                        showResults();
                    }
                }, 300);
            }
        }
        
        function startAssessment() {
            state.showWelcome = false;
            state.currentQuestionIndex = 0;
            render();
        }
        
        function nextQuestion() {
            const currentQ = getCurrentQuestion();
            if (!currentQ) return;
            
            const isAnswered = state.answers[currentQ.id] !== undefined && state.answers[currentQ.id] !== '';
            if (!isAnswered && currentQ.required !== false) return;
            
            if (state.currentQuestionIndex < getVisibleQuestions().length - 1) {
                state.currentQuestionIndex++;
                render();
                window.scrollTo(0, 0);
            } else {
                showResults();
            }
        }
        
        function previousQuestion() {
            if (state.currentQuestionIndex > 0) {
                state.currentQuestionIndex--;
                render();
                window.scrollTo(0, 0);
            }
        }
        
        function showResults() {
            state.showResults = true;
            render();
            setTimeout(() => {
                drawRadarChart();
                
                // Add resize handler for responsive chart
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        drawRadarChart();
                    }, 250);
                });
            }, 100);
        }
        
        async function submitResults() {
            const payload = {
                answers: state.answers,
                scores: state.scores,
                timestamp: new Date().toISOString()
            };
            
            // Try to send to webhook
            if (CONFIG.webhookUrl && CONFIG.webhookUrl !== 'YOUR_WEBHOOK_URL_HERE') {
                try {
                    await fetch(CONFIG.webhookUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                } catch (error) {
                    console.error('Error sending to webhook:', error);
                }
            }
            
            // Show success message
            document.getElementById('app').innerHTML = `
                <div class="container">
                    ${renderSuccess()}
                </div>
            `;
        }
        
        // Main Render Function
        function render() {
            const app = document.getElementById('app');
            
            if (state.showWelcome) {
                document.getElementById('progress').classList.add('hidden');
                app.innerHTML = `<div class="container">${renderWelcome()}</div>`;
            } else if (state.showResults) {
                document.getElementById('progress').classList.add('hidden');
                app.innerHTML = `<div class="container-wide">${renderResults()}</div>`;
            } else {
                document.getElementById('progress').classList.remove('hidden');
                document.getElementById('progress').innerHTML = renderProgress();
                app.innerHTML = `<div class="container">${renderQuestion(getCurrentQuestion())}</div>`;
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            render();
        });
    </script>
</head>
<body>
    <div class="progress-wrapper hidden" id="progress"></div>
    <div class="main-content" id="app"></div>
</body>
</html>
