<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2B Marketing Assessment - Das 4R-System | Brixon</title>
    <meta name="description" content="Evaluieren Sie Ihren Marketing-Status mit dem Brixon 4R-System. 8-12 Minuten für Ihre personalisierte Analyse.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Custom Properties */
        :root {
            --color-black: #0a0a0a;
            --color-white: #ffffff;
            --color-accent: #f7e74f;
            --color-gray-50: #fafafa;
            --color-gray-100: #f5f5f5;
            --color-gray-200: #e5e5e5;
            --color-gray-300: #d4d4d4;
            --color-gray-400: #a3a3a3;
            --color-gray-500: #737373;
            --color-gray-600: #525252;
            --color-gray-700: #404040;
            --color-gray-800: #262626;
            --color-gray-900: #171717;
            
            --font-base: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            
            --radius: 8px;
            --border: 1px solid var(--color-gray-200);
        }
        
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-base);
            background: var(--color-white);
            color: var(--color-black);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Typography */
        h1, h2, h3 {
            font-weight: 600;
            line-height: 1.2;
            letter-spacing: -0.025em;
        }
        
        h1 {
            font-size: clamp(2rem, 4vw, 2.5rem);
        }
        
        h2 {
            font-size: clamp(1.5rem, 3vw, 2rem);
        }
        
        h3 {
            font-size: clamp(1.125rem, 2vw, 1.5rem);
        }
        
        /* Container */
        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        
        .container-wide {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        
        /* Progress Bar */
        .progress-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--color-white);
            border-bottom: var(--border);
            z-index: 100;
            padding: 1rem 0;
        }
        
        .progress-container {
            max-width: 680px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .progress-bar {
            height: 2px;
            background: var(--color-gray-200);
            overflow: hidden;
            margin-bottom: 0.75rem;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--color-black);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8125rem;
            color: var(--color-gray-500);
        }
        
        .progress-label {
            font-weight: 500;
            color: var(--color-black);
        }
        
        /* Main Content */
        .main-content {
            margin-top: 100px;
            min-height: calc(100vh - 200px);
        }
        
        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 6rem 0 4rem;
        }
        
        .welcome-screen h1 {
            margin-bottom: 1rem;
        }
        
        .welcome-subtitle {
            font-size: 1rem;
            color: var(--color-gray-600);
            margin-bottom: 0.5rem;
            font-weight: 400;
        }
        
        .welcome-duration {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.875rem;
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: var(--radius);
            font-size: 0.8125rem;
            color: var(--color-gray-600);
            margin-bottom: 3rem;
        }
        
        /* Question Card */
        .question-card {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2.5rem 2rem;
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question-number {
            display: inline-block;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--color-gray-500);
            margin-bottom: 0.75rem;
        }
        
        .question-text {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            color: var(--color-black);
            line-height: 1.4;
        }
        
        .question-hint {
            font-size: 0.875rem;
            color: var(--color-gray-500);
            margin-top: -0.75rem;
            margin-bottom: 1.25rem;
        }
        
        /* Options */
        .options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .option {
            position: relative;
            display: flex;
            align-items: center;
            padding: 0.875rem 1rem;
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .option:hover {
            background: var(--color-gray-50);
            border-color: var(--color-gray-300);
        }
        
        .option.selected {
            background: var(--color-gray-50);
            border-color: var(--color-black);
        }
        
        .option input[type="radio"],
        .option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }
        
        .option-radio,
        .option-checkbox {
            width: 18px;
            height: 18px;
            border: var(--border);
            border-radius: 50%;
            margin-right: 0.75rem;
            flex-shrink: 0;
            transition: all 0.15s ease;
        }
        
        .option-checkbox {
            border-radius: 4px;
        }
        
        .option:hover .option-radio,
        .option:hover .option-checkbox {
            border-color: var(--color-gray-400);
        }
        
        .option.selected .option-radio,
        .option.selected .option-checkbox {
            border-color: var(--color-black);
            background: var(--color-black);
            position: relative;
        }
        
        .option.selected .option-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 6px;
            background: var(--color-white);
            border-radius: 50%;
        }
        
        .option.selected .option-checkbox::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--color-white);
            font-size: 12px;
            line-height: 1;
        }
        
        .option-label {
            font-size: 0.9375rem;
            color: var(--color-black);
            font-weight: 400;
        }
        
        .option.selected .option-label {
            font-weight: 500;
        }
        
        /* Text Input */
        .text-input-wrapper {
            margin-top: 0.5rem;
        }
        
        .text-input {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 0.9375rem;
            font-family: var(--font-base);
            border: var(--border);
            border-radius: var(--radius);
            outline: none;
            transition: border-color 0.15s ease;
        }
        
        .text-input:focus {
            border-color: var(--color-gray-400);
        }
        
        .text-input::placeholder {
            color: var(--color-gray-400);
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.9375rem;
            font-weight: 500;
            font-family: var(--font-base);
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.15s ease;
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--color-black);
            color: var(--color-white);
        }
        
        .btn-primary:hover:not(:disabled) {
            background: var(--color-gray-800);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: var(--color-white);
            color: var(--color-black);
            border: var(--border);
        }
        
        .btn-secondary:hover {
            background: var(--color-gray-50);
        }
        
        .btn-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        
        .arrow {
            font-size: 1rem;
            transition: transform 0.15s ease;
        }
        
        .btn:hover .arrow {
            transform: translateX(2px);
        }
        
        /* Results */
        .results-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .results-header h1 {
            margin-bottom: 0.5rem;
        }
        
        .results-subtitle {
            font-size: 1rem;
            color: var(--color-gray-600);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .score-card {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
        }
        
        .score-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }
        
        .score-card-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-gray-600);
        }
        
        .score-value {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--color-black);
        }
        
        .score-max {
            font-size: 1rem;
            color: var(--color-gray-400);
            font-weight: 400;
        }
        
        .score-bar {
            height: 4px;
            background: var(--color-gray-200);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .score-bar-fill {
            height: 100%;
            background: var(--color-black);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .score-percentage {
            font-size: 0.8125rem;
            color: var(--color-gray-500);
        }
        
        /* Chart */
        .chart-container {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #radarChart {
            max-width: 100%;
            height: auto;
        }
        
        /* Recommendations */
        .recommendations {
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .recommendations h3 {
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }
        
        .recommendation-item {
            padding: 1rem 0;
            border-bottom: var(--border);
        }
        
        .recommendation-item:last-child {
            border-bottom: none;
        }
        
        .recommendation-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
            color: var(--color-black);
        }
        
        .recommendation-text {
            font-size: 0.9375rem;
            color: var(--color-gray-600);
            line-height: 1.5;
        }
        
        /* Contact Form */
        .contact-form {
            background: var(--color-white);
            border: var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-black);
            margin-bottom: 0.5rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 0.9375rem;
            font-family: var(--font-base);
            border: var(--border);
            border-radius: var(--radius);
            outline: none;
            transition: border-color 0.15s ease;
        }
        
        .form-input:focus {
            border-color: var(--color-gray-400);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-wrapper {
            display: flex;
            align-items: start;
            gap: 0.75rem;
        }
        
        .checkbox-input {
            width: 18px;
            height: 18px;
            border: var(--border);
            border-radius: 4px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .checkbox-label {
            font-size: 0.875rem;
            color: var(--color-gray-600);
            line-height: 1.5;
        }
        
        /* Success Message */
        .success-container {
            text-align: center;
            padding: 6rem 0;
        }
        
        .success-icon {
            width: 64px;
            height: 64px;
            background: var(--color-gray-50);
            border: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }
        
        .success-icon svg {
            width: 32px;
            height: 32px;
            stroke: var(--color-black);
        }
        
        .success-title {
            margin-bottom: 0.75rem;
        }
        
        .success-text {
            font-size: 1rem;
            color: var(--color-gray-600);
            margin-bottom: 2rem;
        }
        
        /* Responsive */
        @media (max-width: 640px) {
            .container,
            .progress-container {
                padding: 0 1rem;
            }
            
            .question-card {
                padding: 2rem 1.5rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Utilities */
        .hidden {
            display: none;
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
    
    <script>
        const CONFIG = {
            webhookUrl: 'YOUR_WEBHOOK_URL_HERE', // Replace with your webhook URL
            questions: [
                // Context Questions (No points)
                {
                    id: 'q_001',
                    section: 'context',
                    text: 'Wie viele Mitarbeiter hat Ihr Unternehmen?',
                    type: 'single',
                    options: [
                        { value: '1-10', label: '1-10 Mitarbeiter', score: 0 },
                        { value: '11-50', label: '11-50 Mitarbeiter', score: 0 },
                        { value: '51-200', label: '51-200 Mitarbeiter', score: 0 },
                        { value: '201-500', label: '201-500 Mitarbeiter', score: 0 },
                        { value: '500+', label: 'Über 500 Mitarbeiter', score: 0 }
                    ]
                },
                {
                    id: 'q_002',
                    section: 'context',
                    text: 'Wie viele qualifizierte Leads generieren Sie monatlich?',
                    type: 'single',
                    options: [
                        { value: '0-10', label: '0-10 Leads', score: 0 },
                        { value: '11-50', label: '11-50 Leads', score: 0 },
                        { value: '51-100', label: '51-100 Leads', score: 0 },
                        { value: '100-500', label: '100-500 Leads', score: 0 },
                        { value: '500+', label: 'Über 500 Leads', score: 0 }
                    ]
                },
                {
                    id: 'q_003',
                    section: 'context',
                    text: 'Was sind Ihre größten Herausforderungen im B2B Marketing?',
                    hint: 'Wählen Sie alle zutreffenden Optionen',
                    type: 'multiple',
                    options: [
                        { value: 'leadgen', label: 'Lead-Generierung', score: 0 },
                        { value: 'qualify', label: 'Lead-Qualifizierung', score: 0 },
                        { value: 'content', label: 'Content-Produktion', score: 0 },
                        { value: 'channels', label: 'Kanal-Auswahl', score: 0 },
                        { value: 'measurement', label: 'Performance-Messung', score: 0 },
                        { value: 'budget', label: 'Budget-Optimierung', score: 0 }
                    ]
                },
                
                // REACH Phase (35 points total)
                {
                    id: 'q_101',
                    section: 'reach',
                    text: 'Haben Sie definierte Buyer Personas für Ihre Zielgruppe?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein, noch nicht definiert', score: 0 },
                        { value: 'basic', label: 'Ja, grundlegende Personas', score: 2 },
                        { value: 'detailed', label: 'Ja, detaillierte Personas mit Research', score: 5 }
                    ]
                },
                {
                    id: 'q_102',
                    section: 'reach',
                    text: 'Nutzen Sie bezahlte Werbung (Google Ads, LinkedIn Ads, etc.)?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'testing', label: 'Ja, vereinzelt im Testing', score: 2 },
                        { value: 'active', label: 'Ja, aktive Kampagnen mit Tracking', score: 4 },
                        { value: 'optimized', label: 'Ja, kontinuierlich optimiert', score: 5 }
                    ]
                },
                {
                    id: 'q_103',
                    section: 'reach',
                    text: 'Wie präsent ist Ihr Unternehmen in relevanten Online-Kanälen?',
                    type: 'single',
                    options: [
                        { value: 'minimal', label: 'Kaum präsent', score: 0 },
                        { value: 'selective', label: 'In ausgewählten Kanälen', score: 3 },
                        { value: 'active', label: 'Aktiv in mehreren Kanälen', score: 5 }
                    ]
                },
                {
                    id: 'q_104',
                    section: 'reach',
                    text: 'Haben Sie eine SEO-Strategie für organische Reichweite?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'basic', label: 'Grundlegende Optimierung', score: 2 },
                        { value: 'strategic', label: 'Strategische SEO mit Content-Plan', score: 5 }
                    ]
                },
                {
                    id: 'q_105',
                    section: 'reach',
                    text: 'Nutzen Sie Account-Based Marketing (ABM) Ansätze?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'planned', label: 'In Planung', score: 2 },
                        { value: 'active', label: 'Ja, aktiv im Einsatz', score: 5 }
                    ]
                },
                {
                    id: 'q_106',
                    section: 'reach',
                    text: 'Wie messen Sie die Reichweite Ihrer Marketing-Aktivitäten?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Gar nicht', score: 0 },
                        { value: 'basic', label: 'Basis-Metriken (Traffic, Impressions)', score: 2 },
                        { value: 'advanced', label: 'Multi-Touch Attribution & ROI-Tracking', score: 5 }
                    ]
                },
                {
                    id: 'q_107',
                    section: 'reach',
                    text: 'Haben Sie Partnerschaften oder Co-Marketing-Aktivitäten?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'few', label: 'Vereinzelt', score: 3 },
                        { value: 'strategic', label: 'Strategische Partnerschaften', score: 6 }
                    ]
                },
                
                // RELATE Phase (32 points total)
                {
                    id: 'q_201',
                    section: 'relate',
                    text: 'Produzieren Sie regelmäßig Content für Ihre Zielgruppe?',
                    type: 'single',
                    options: [
                        { value: 'rarely', label: 'Selten oder unregelmäßig', score: 0 },
                        { value: 'monthly', label: 'Monatlich', score: 2 },
                        { value: 'weekly', label: 'Wöchentlich mit Content-Plan', score: 5 }
                    ]
                },
                {
                    id: 'q_202',
                    section: 'relate',
                    text: 'Wie personalisiert ist Ihre Kommunikation mit Interessenten?',
                    type: 'single',
                    options: [
                        { value: 'generic', label: 'Generische Massenkommunikation', score: 0 },
                        { value: 'segmented', label: 'Segmentierte Ansprache', score: 3 },
                        { value: 'personalized', label: 'Personalisiert nach Buyer Journey', score: 5 }
                    ]
                },
                {
                    id: 'q_203',
                    section: 'relate',
                    text: 'Nutzen Sie Marketing Automation?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'basic', label: 'Basis-Automation (z.B. Newsletter)', score: 2 },
                        { value: 'advanced', label: 'Fortgeschrittene Workflows & Nurturing', score: 5 }
                    ]
                },
                {
                    id: 'q_204',
                    section: 'relate',
                    text: 'Wie gut kennen Sie die Bedürfnisse Ihrer Zielgruppe?',
                    type: 'single',
                    options: [
                        { value: 'assumptions', label: 'Basierend auf Annahmen', score: 0 },
                        { value: 'feedback', label: 'Durch Feedback und Analysen', score: 3 },
                        { value: 'research', label: 'Kontinuierliche Marktforschung', score: 5 }
                    ]
                },
                {
                    id: 'q_205',
                    section: 'relate',
                    text: 'Welche Content-Formate nutzen Sie?',
                    hint: 'Wählen Sie alle zutreffenden Optionen',
                    type: 'multiple',
                    options: [
                        { value: 'blog', label: 'Blog-Artikel', score: 1 },
                        { value: 'video', label: 'Videos', score: 1 },
                        { value: 'webinar', label: 'Webinare', score: 1 },
                        { value: 'whitepaper', label: 'Whitepapers/E-Books', score: 1 },
                        { value: 'case', label: 'Case Studies', score: 1 },
                        { value: 'podcast', label: 'Podcast', score: 1 }
                    ]
                },
                {
                    id: 'q_206',
                    section: 'relate',
                    text: 'Wie oft interagieren Sie mit Ihrer Community (Social Media, Events)?',
                    type: 'single',
                    options: [
                        { value: 'rarely', label: 'Selten', score: 0 },
                        { value: 'monthly', label: 'Monatlich', score: 3 },
                        { value: 'weekly', label: 'Wöchentlich oder öfter', score: 5 }
                    ]
                },
                {
                    id: 'q_207',
                    section: 'relate',
                    text: 'Haben Sie ein CRM-System zur Kontaktverwaltung?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'basic', label: 'Ja, grundlegende Nutzung', score: 2 },
                        { value: 'integrated', label: 'Ja, vollständig integriert mit Marketing', score: 5 }
                    ]
                },
                
                // RESPOND Phase (27 points total)
                {
                    id: 'q_301',
                    section: 'respond',
                    text: 'Wie schnell reagieren Sie auf eingehende Anfragen?',
                    type: 'single',
                    options: [
                        { value: 'days', label: 'Mehrere Tage', score: 0 },
                        { value: '24h', label: 'Innerhalb von 24 Stunden', score: 3 },
                        { value: 'hours', label: 'Innerhalb weniger Stunden', score: 5 }
                    ]
                },
                {
                    id: 'q_302',
                    section: 'respond',
                    text: 'Haben Sie definierte Prozesse für Lead-Qualifizierung?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein, keine festen Prozesse', score: 0 },
                        { value: 'basic', label: 'Grundlegende Qualifizierung', score: 2 },
                        { value: 'scoring', label: 'Lead Scoring & automatisierte Prozesse', score: 5 }
                    ]
                },
                {
                    id: 'q_303',
                    section: 'respond',
                    text: 'Nutzen Sie Lead Nurturing Kampagnen?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'basic', label: 'Einfache E-Mail-Sequenzen', score: 3 },
                        { value: 'advanced', label: 'Multi-Channel Nurturing-Strategie', score: 5 }
                    ]
                },
                {
                    id: 'q_304',
                    section: 'respond',
                    text: 'Wie gut ist die Zusammenarbeit zwischen Marketing und Vertrieb?',
                    type: 'single',
                    options: [
                        { value: 'siloed', label: 'Getrennte Silos', score: 0 },
                        { value: 'communication', label: 'Regelmäßige Abstimmung', score: 3 },
                        { value: 'aligned', label: 'Vollständig abgestimmt (SLA)', score: 6 }
                    ]
                },
                {
                    id: 'q_305',
                    section: 'respond',
                    text: 'Tracken Sie die Conversion-Rate von Leads zu Kunden?',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein', score: 0 },
                        { value: 'manual', label: 'Ja, manuell', score: 2 },
                        { value: 'automated', label: 'Ja, automatisiert mit Reporting', score: 5 }
                    ]
                },
                {
                    id: 'q_306',
                    section: 'respond',
                    text: 'Optimieren Sie kontinuierlich Ihre Conversion-Funnel?',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein', score: 0 },
                        { value: 'occasionally', label: 'Gelegentlich', score: 2 },
                        { value: 'regularly', label: 'Regelmäßig mit A/B-Tests', score: 4 }
                    ]
                },
                
                // RETAIN Phase (27 points total)
                {
                    id: 'q_401',
                    section: 'retain',
                    text: 'Haben Sie ein Programm für Kundenbindung?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'basic', label: 'Grundlegende Maßnahmen', score: 3 },
                        { value: 'strategic', label: 'Strategisches Retention-Programm', score: 5 }
                    ]
                },
                {
                    id: 'q_402',
                    section: 'retain',
                    text: 'Wie oft kommunizieren Sie mit Bestandskunden?',
                    type: 'single',
                    options: [
                        { value: 'rarely', label: 'Selten', score: 0 },
                        { value: 'quarterly', label: 'Quartalsweise', score: 3 },
                        { value: 'regular', label: 'Regelmäßig mit Value-Content', score: 5 }
                    ]
                },
                {
                    id: 'q_403',
                    section: 'retain',
                    text: 'Messen Sie die Kundenzufriedenheit (NPS, CSAT)?',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein', score: 0 },
                        { value: 'occasionally', label: 'Gelegentlich', score: 2 },
                        { value: 'regularly', label: 'Regelmäßig mit Follow-up', score: 5 }
                    ]
                },
                {
                    id: 'q_404',
                    section: 'retain',
                    text: 'Haben Sie ein Upselling/Cross-Selling Programm?',
                    type: 'single',
                    options: [
                        { value: 'none', label: 'Nein', score: 0 },
                        { value: 'adhoc', label: 'Ad-hoc Ansätze', score: 2 },
                        { value: 'systematic', label: 'Systematischer Prozess', score: 5 }
                    ]
                },
                {
                    id: 'q_405',
                    section: 'retain',
                    text: 'Nutzen Sie Kunden als Referenzen oder Testimonials?',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein', score: 0 },
                        { value: 'few', label: 'Vereinzelt', score: 3 },
                        { value: 'program', label: 'Strukturiertes Advocacy-Programm', score: 5 }
                    ]
                },
                {
                    id: 'q_406',
                    section: 'retain',
                    text: 'Tracken Sie die Customer Lifetime Value (CLV)?',
                    type: 'single',
                    options: [
                        { value: 'no', label: 'Nein', score: 0 },
                        { value: 'estimated', label: 'Geschätzt', score: 2 },
                        { value: 'tracked', label: 'Präzise gemessen und optimiert', score: 5 }
                    ]
                },
                
                // Final Questions
                {
                    id: 'q_701',
                    section: 'final',
                    text: 'Möchten Sie eine detaillierte Analyse Ihrer Ergebnisse erhalten?',
                    type: 'single',
                    options: [
                        { value: 'yes', label: 'Ja, ich möchte eine detaillierte Analyse', score: 0 },
                        { value: 'no', label: 'Nein, nur die Ergebnisse ansehen', score: 0 }
                    ]
                }
            ]
        };
        
        // State Management
        window.state = {
            currentQuestionIndex: 0,
            answers: {},
            scores: {
                reach: 0,
                relate: 0,
                respond: 0,
                retain: 0,
                total: 0
            },
            showWelcome: true,
            showResults: false,
            showContact: false
        };
        
        // Utility Functions
        function getQuestions() {
            return CONFIG.questions;
        }
        
        function getCurrentQuestion() {
            return getQuestions()[state.currentQuestionIndex];
        }
        
        function getSectionLabel(section) {
            const labels = {
                context: 'Kontext',
                reach: 'Reach',
                relate: 'Relate',
                respond: 'Respond',
                retain: 'Retain',
                final: 'Abschluss'
            };
            return labels[section] || section;
        }
        
        function calculateProgress() {
            const total = getQuestions().length;
            const current = state.currentQuestionIndex + 1;
            return Math.round((current / total) * 100);
        }
        
        function calculateScores() {
            const scores = {
                reach: 0,
                relate: 0,
                respond: 0,
                retain: 0,
                total: 0
            };
            
            Object.keys(state.answers).forEach(questionId => {
                const question = CONFIG.questions.find(q => q.id === questionId);
                if (!question) return;
                
                const answer = state.answers[questionId];
                
                if (question.type === 'multiple') {
                    answer.forEach(value => {
                        const option = question.options.find(o => o.value === value);
                        if (option && question.section in scores) {
                            scores[question.section] += option.score || 0;
                        }
                    });
                } else {
                    const option = question.options.find(o => o.value === answer);
                    if (option && question.section in scores) {
                        scores[question.section] += option.score || 0;
                    }
                }
            });
            
            scores.total = scores.reach + scores.relate + scores.respond + scores.retain;
            state.scores = scores;
            return scores;
        }
        
        // Rendering Functions
        function renderProgress() {
            const progress = calculateProgress();
            const current = state.currentQuestionIndex + 1;
            const total = getQuestions().length;
            const currentQuestion = getCurrentQuestion();
            
            return `
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">
                        <span class="progress-label">${getSectionLabel(currentQuestion.section)}</span>
                        <span>Frage ${current} von ${total}</span>
                    </div>
                </div>
            `;
        }
        
        function renderWelcome() {
            return `
                <div class="welcome-screen fade-in">
                    <h1>B2B Marketing Assessment</h1>
                    <p class="welcome-subtitle">Evaluieren Sie Ihren Marketing-Reifegrad mit dem 4R-System</p>
                    <div class="welcome-duration">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        ca. 8-10 Minuten
                    </div>
                    <button class="btn btn-primary" onclick="startAssessment()" data-testid="button-start-assessment">
                        Assessment starten
                        <span class="arrow">→</span>
                    </button>
                </div>
            `;
        }
        
        function renderQuestion(question) {
            const isAnswered = state.answers[question.id] !== undefined;
            const questionIndex = getQuestions().findIndex(q => q.id === question.id);
            
            let optionsHtml = '';
            if (question.type === 'single') {
                optionsHtml = question.options.map(option => {
                    const isSelected = state.answers[question.id] === option.value;
                    return `
                        <label class="option ${isSelected ? 'selected' : ''}" data-testid="option-${option.value}">
                            <input 
                                type="radio" 
                                name="${question.id}" 
                                value="${option.value}"
                                ${isSelected ? 'checked' : ''}
                                onchange="handleAnswer('${question.id}', '${option.value}', ${option.score})"
                            >
                            <div class="option-radio"></div>
                            <span class="option-label">${option.label}</span>
                        </label>
                    `;
                }).join('');
            } else if (question.type === 'multiple') {
                optionsHtml = question.options.map(option => {
                    const isSelected = state.answers[question.id]?.includes(option.value);
                    return `
                        <label class="option ${isSelected ? 'selected' : ''}" data-testid="option-${option.value}">
                            <input 
                                type="checkbox" 
                                name="${question.id}" 
                                value="${option.value}"
                                ${isSelected ? 'checked' : ''}
                                onchange="handleMultipleAnswer('${question.id}', '${option.value}')"
                            >
                            <div class="option-checkbox"></div>
                            <span class="option-label">${option.label}</span>
                        </label>
                    `;
                }).join('');
            } else if (question.type === 'text') {
                const value = state.answers[question.id] || '';
                optionsHtml = `
                    <div class="text-input-wrapper">
                        <input 
                            type="text" 
                            class="text-input" 
                            value="${value}"
                            placeholder="${question.placeholder || 'Ihre Antwort...'}"
                            onchange="handleAnswer('${question.id}', this.value, 0)"
                            data-testid="input-${question.id}"
                        >
                    </div>
                `;
            }
            
            return `
                <div class="question-card">
                    <div class="question-number">Frage ${questionIndex + 1} von ${getQuestions().length}</div>
                    <h2 class="question-text">${question.text}</h2>
                    ${question.hint ? `<p class="question-hint">${question.hint}</p>` : ''}
                    <div class="options">
                        ${optionsHtml}
                    </div>
                    <div class="btn-group">
                        ${questionIndex > 0 ? `
                            <button class="btn btn-secondary" onclick="previousQuestion()" data-testid="button-previous">
                                ← Zurück
                            </button>
                        ` : ''}
                        <button 
                            class="btn btn-primary" 
                            onclick="nextQuestion()" 
                            ${!isAnswered ? 'disabled' : ''}
                            data-testid="button-next"
                        >
                            ${questionIndex === getQuestions().length - 1 ? 'Ergebnisse anzeigen' : 'Weiter'}
                            <span class="arrow">→</span>
                        </button>
                    </div>
                </div>
            `;
        }
        
        function renderResults() {
            const scores = calculateScores();
            const maxScores = { reach: 35, relate: 32, respond: 27, retain: 27, total: 121 };
            
            const getInterpretation = (score, max) => {
                const percentage = (score / max) * 100;
                if (percentage >= 80) return 'Ausgezeichnet';
                if (percentage >= 60) return 'Gut entwickelt';
                if (percentage >= 40) return 'Entwicklungspotenzial';
                if (percentage >= 20) return 'Grundlagen vorhanden';
                return 'Ausbaufähig';
            };
            
            return `
                <div class="results-header fade-in">
                    <h1>Ihre Ergebnisse</h1>
                    <p class="results-subtitle">Basierend auf Ihren Angaben</p>
                </div>
                
                <div class="results-grid fade-in">
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Gesamtscore</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.total}</span>
                            <span class="score-max">/ ${maxScores.total}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.total/maxScores.total)*100}%"></div>
                        </div>
                        <div class="score-percentage">${Math.round((scores.total/maxScores.total)*100)}% erreicht</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Reach</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.reach}</span>
                            <span class="score-max">/ ${maxScores.reach}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.reach/maxScores.reach)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.reach, maxScores.reach)}</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Relate</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.relate}</span>
                            <span class="score-max">/ ${maxScores.relate}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.relate/maxScores.relate)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.relate, maxScores.relate)}</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Respond</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.respond}</span>
                            <span class="score-max">/ ${maxScores.respond}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.respond/maxScores.respond)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.respond, maxScores.respond)}</div>
                    </div>
                    
                    <div class="score-card">
                        <div class="score-card-header">
                            <div class="score-card-title">Retain</div>
                        </div>
                        <div>
                            <span class="score-value">${scores.retain}</span>
                            <span class="score-max">/ ${maxScores.retain}</span>
                        </div>
                        <div class="score-bar" style="margin-top: 1rem;">
                            <div class="score-bar-fill" style="width: ${(scores.retain/maxScores.retain)*100}%"></div>
                        </div>
                        <div class="score-percentage">${getInterpretation(scores.retain, maxScores.retain)}</div>
                    </div>
                </div>
                
                <div class="chart-container fade-in">
                    <canvas id="radarChart" width="400" height="400"></canvas>
                </div>
                
                <div class="recommendations fade-in">
                    <h3>Empfehlungen</h3>
                    ${getRecommendations(scores, maxScores)}
                </div>
                
                <div class="btn-group fade-in">
                    ${state.answers['q_701'] === 'yes' ? `
                        <button class="btn btn-primary" onclick="showContactForm()" data-testid="button-request-analysis">
                            Detaillierte Analyse anfragen
                            <span class="arrow">→</span>
                        </button>
                    ` : `
                        <button class="btn btn-primary" onclick="submitResults()" data-testid="button-submit-results">
                            Ergebnisse einreichen
                            <span class="arrow">→</span>
                        </button>
                    `}
                    <button class="btn btn-secondary" onclick="location.reload()" data-testid="button-restart">
                        Neues Assessment
                    </button>
                </div>
            `;
        }
        
        function getRecommendations(scores, maxScores) {
            const recommendations = [];
            
            if (scores.reach / maxScores.reach < 0.6) {
                recommendations.push({
                    title: 'Reach optimieren',
                    text: 'Investieren Sie in Ihre Reichweite durch bezahlte Werbung, SEO und strategische Partnerschaften.'
                });
            }
            
            if (scores.relate / maxScores.relate < 0.6) {
                recommendations.push({
                    title: 'Content-Strategie ausbauen',
                    text: 'Entwickeln Sie eine konsistente Content-Strategie mit personalisierten Inhalten für Ihre Buyer Journey.'
                });
            }
            
            if (scores.respond / maxScores.respond < 0.6) {
                recommendations.push({
                    title: 'Lead-Management verbessern',
                    text: 'Implementieren Sie Lead Scoring und automatisierte Nurturing-Prozesse für bessere Conversion-Raten.'
                });
            }
            
            if (scores.retain / maxScores.retain < 0.6) {
                recommendations.push({
                    title: 'Kundenbindung stärken',
                    text: 'Etablieren Sie ein strukturiertes Retention-Programm mit regelmäßiger Kommunikation und Upselling.'
                });
            }
            
            if (recommendations.length === 0) {
                recommendations.push({
                    title: 'Hervorragend!',
                    text: 'Ihre Marketing-Aktivitäten sind gut aufgestellt. Fokussieren Sie sich auf kontinuierliche Optimierung.'
                });
            }
            
            return recommendations.map(rec => `
                <div class="recommendation-item">
                    <div class="recommendation-title">${rec.title}</div>
                    <div class="recommendation-text">${rec.text}</div>
                </div>
            `).join('');
        }
        
        function drawRadarChart() {
            const canvas = document.getElementById('radarChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 60;
            
            const scores = state.scores;
            const maxScores = { reach: 35, relate: 32, respond: 27, retain: 27 };
            const labels = ['Reach', 'Relate', 'Respond', 'Retain'];
            const values = [
                scores.reach / maxScores.reach,
                scores.relate / maxScores.relate,
                scores.respond / maxScores.respond,
                scores.retain / maxScores.retain
            ];
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            ctx.strokeStyle = '#e5e5e5';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 5; i++) {
                const r = (radius / 5) * i;
                ctx.beginPath();
                for (let j = 0; j < 4; j++) {
                    const angle = (Math.PI * 2 * j) / 4 - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * r;
                    const y = centerY + Math.sin(angle) * r;
                    if (j === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#d4d4d4';
            ctx.lineWidth = 1;
            for (let i = 0; i < 4; i++) {
                const angle = (Math.PI * 2 * i) / 4 - Math.PI / 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            // Draw data
            ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
            ctx.strokeStyle = '#0a0a0a';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < values.length; i++) {
                const angle = (Math.PI * 2 * i) / values.length - Math.PI / 2;
                const r = radius * values[i];
                const x = centerX + Math.cos(angle) * r;
                const y = centerY + Math.sin(angle) * r;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw labels
            ctx.fillStyle = '#404040';
            ctx.font = '500 14px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            for (let i = 0; i < labels.length; i++) {
                const angle = (Math.PI * 2 * i) / labels.length - Math.PI / 2;
                const x = centerX + Math.cos(angle) * (radius + 35);
                const y = centerY + Math.sin(angle) * (radius + 35);
                ctx.fillText(labels[i], x, y);
            }
        }
        
        function renderContactForm() {
            return `
                <div class="contact-form fade-in">
                    <h3 style="margin-bottom: 1.5rem;">Detaillierte Analyse anfordern</h3>
                    <form onsubmit="submitResults(); return false;">
                        <div class="form-group">
                            <label class="form-label" for="name">Name *</label>
                            <input 
                                type="text" 
                                id="name" 
                                class="form-input" 
                                required
                                onchange="state.answers['q_702'] = this.value"
                                data-testid="input-name"
                            >
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="email">E-Mail *</label>
                            <input 
                                type="email" 
                                id="email" 
                                class="form-input" 
                                required
                                onchange="state.answers['q_703'] = this.value"
                                data-testid="input-email"
                            >
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="company">Unternehmen *</label>
                            <input 
                                type="text" 
                                id="company" 
                                class="form-input" 
                                required
                                onchange="state.answers['q_704'] = this.value"
                                data-testid="input-company"
                            >
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="industry">Branche</label>
                            <input 
                                type="text" 
                                id="industry" 
                                class="form-input"
                                onchange="state.answers['q_705'] = this.value"
                                data-testid="input-industry"
                            >
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="notes">Anmerkungen</label>
                            <textarea 
                                id="notes" 
                                class="form-input form-textarea"
                                onchange="state.answers['q_706'] = this.value"
                                data-testid="input-notes"
                            ></textarea>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-wrapper">
                                <input 
                                    type="checkbox" 
                                    id="consultation" 
                                    class="checkbox-input"
                                    onchange="state.answers['q_707'] = this.checked ? 'yes' : 'no'"
                                    data-testid="checkbox-consultation"
                                >
                                <label class="checkbox-label" for="consultation">
                                    Ich möchte ein unverbindliches Beratungsgespräch
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-wrapper">
                                <input 
                                    type="checkbox" 
                                    id="consent" 
                                    class="checkbox-input" 
                                    required
                                    onchange="state.answers['q_708'] = this.checked ? 'agreed' : 'not-agreed'"
                                    data-testid="checkbox-consent"
                                >
                                <label class="checkbox-label" for="consent">
                                    Ich stimme der Verarbeitung meiner Daten gemäß der Datenschutzerklärung zu *
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" data-testid="button-submit-contact">
                            Analyse anfordern
                            <span class="arrow">→</span>
                        </button>
                    </form>
                </div>
            `;
        }
        
        async function submitResults() {
            const submitButton = event?.target || document.querySelector('[data-testid="button-submit-contact"]') || document.querySelector('[data-testid="button-submit-results"]');
            if (!submitButton) return;
            
            const originalText = submitButton.innerHTML;
            submitButton.disabled = true;
            submitButton.innerHTML = 'Wird gesendet...';
            
            const scores = calculateScores();
            const submitData = {
                timestamp: new Date().toISOString(),
                scores: scores,
                answers: state.answers,
                contact: state.showContact ? {
                    name: state.answers.q_702,
                    email: state.answers.q_703,
                    company: state.answers.q_704,
                    industry: state.answers.q_705,
                    notes: state.answers.q_706,
                    wantsConsultation: state.answers.q_707 === 'yes',
                    consentGiven: state.answers.q_708 === 'agreed'
                } : null
            };
            
            // Save to localStorage
            try {
                localStorage.setItem('assessment_backup_' + Date.now(), JSON.stringify(submitData));
                console.log('✅ Assessment Data gespeichert:', submitData);
            } catch (e) {
                console.error('Could not save to localStorage:', e);
            }
            
            // Send to webhook if configured
            if (CONFIG.webhookUrl && CONFIG.webhookUrl !== 'YOUR_WEBHOOK_URL_HERE') {
                try {
                    const response = await fetch(CONFIG.webhookUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(submitData)
                    });
                    
                    if (response.ok) {
                        console.log('✅ Daten erfolgreich an Webhook gesendet');
                    } else {
                        console.warn('⚠️ Webhook Error:', response.status);
                    }
                } catch (error) {
                    console.warn('⚠️ Webhook nicht erreichbar:', error.message);
                }
            } else {
                console.log('ℹ️ Kein Webhook konfiguriert - Daten in localStorage und Console verfügbar');
            }
            
            // Always show success
            showSuccessMessage();
            
            // Restore button
            submitButton.disabled = false;
            submitButton.innerHTML = originalText;
        }
        
        function showSuccessMessage() {
            const container = document.getElementById('appContainer');
            container.innerHTML = `
                <div class="success-container fade-in">
                    <div class="success-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    </div>
                    <h2 class="success-title">Vielen Dank!</h2>
                    <p class="success-text">
                        Ihre Ergebnisse wurden erfolgreich gespeichert.
                        ${state.showContact ? '<br>Sie erhalten Ihre detaillierte Analyse in Kürze per E-Mail.' : ''}
                    </p>
                    <button class="btn btn-primary" onclick="location.reload()" data-testid="button-new-assessment">
                        Neues Assessment starten
                        <span class="arrow">→</span>
                    </button>
                </div>
            `;
        }

        // Event Handlers
        function startAssessment() {
            state.showWelcome = false;
            state.currentQuestionIndex = 0;
            render();
        }

        function handleAnswer(questionId, value, score) {
            state.answers[questionId] = value;
            
            // Update button state
            const button = document.querySelector('.btn-primary');
            if (button) button.disabled = false;
            
            // Update option styling
            document.querySelectorAll(`input[name="${questionId}"]`).forEach(input => {
                const option = input.closest('.option');
                if (input.checked) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
        }

        function handleMultipleAnswer(questionId, value) {
            if (!state.answers[questionId]) {
                state.answers[questionId] = [];
            }
            
            const index = state.answers[questionId].indexOf(value);
            if (index > -1) {
                state.answers[questionId].splice(index, 1);
            } else {
                state.answers[questionId].push(value);
            }
            
            // Update button state
            const button = document.querySelector('.btn-primary');
            if (button) button.disabled = state.answers[questionId].length === 0;
            
            // Update option styling
            document.querySelectorAll(`input[name="${questionId}"]`).forEach(input => {
                const option = input.closest('.option');
                if (input.checked) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
        }

        function nextQuestion() {
            if (state.currentQuestionIndex < getQuestions().length - 1) {
                state.currentQuestionIndex++;
                render();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (state.currentQuestionIndex > 0) {
                state.currentQuestionIndex--;
                render();
            }
        }

        function showResults() {
            state.showResults = true;
            render();
            setTimeout(() => {
                drawRadarChart();
            }, 100);
        }

        function showContactForm() {
            state.showContact = true;
            render();
            setTimeout(() => {
                drawRadarChart();
            }, 100);
        }

        function render() {
            const container = document.getElementById('appContainer');
            const progressWrapper = document.getElementById('progressWrapper');
            
            if (state.showWelcome) {
                progressWrapper.classList.add('hidden');
                container.innerHTML = renderWelcome();
            } else if (state.showResults) {
                progressWrapper.classList.add('hidden');
                const resultsHtml = renderResults();
                const contactHtml = state.showContact ? renderContactForm() : '';
                container.innerHTML = resultsHtml + contactHtml;
                setTimeout(() => {
                    drawRadarChart();
                }, 100);
            } else {
                progressWrapper.classList.remove('hidden');
                progressWrapper.innerHTML = renderProgress();
                container.innerHTML = renderQuestion(getCurrentQuestion());
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            render();
        });
    </script>
</head>
<body>
    <div id="progressWrapper" class="progress-wrapper hidden"></div>
    
    <main class="main-content">
        <div class="container">
            <div id="appContainer"></div>
        </div>
    </main>
</body>
</html>
